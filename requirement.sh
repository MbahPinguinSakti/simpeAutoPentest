#!/bin/bash
while true; do
    # Jalankan ping di background dan tangkap PID-nya
    ping -c 1 google.com &>/dev/null &
    ping_pid=$!

    # Progress bar s
    echo -n "Checking host connections: "
    for i in {1..15}; do
        # Periksa apakah proses ping masih berjalan
        if ps -p $ping_pid >/dev/null; then
            printf ">"
            sleep 0.6
        else
            break
        fi
    done
    # Tunggu proses ping selesai (pastikan selesai)
    wait $ping_pid

    # Cek apakah ping berhasil atau gagal
    if [ $? -eq 0 ]; then
        echo " [Connect]"
        sleep 1
        break
    else
        echo " [Failed to connect]"
        exit
    fi
done
echo -e "\n"
echo "JANGAN JALANKAN SCRIPT DENGAN SEBAGAI ROOT"

sleep 2
clear

tools=("subfinder" "katana" "nuclei")

for tool in "${tools[@]}"; do
    if ! command -v $tool &>/dev/null; then
        echo "beberapa tool mungkin belum terinstall, menginstal ${tool}"
        if ["${tool}" == "subfinder"]; then
            git clone https://github.com/projectdiscovery/subfinder
            sudo cp "${HOME}/subfinder" /usr/bin
        elif ["${tool}" == "katana"]; then
            git clone https://github.com/projectdiscovery/katana
            sudo cp "${HOME}/katana" /usr/bin
        elif ["${tool}" == "nuclei"]; then
            git clone https://github.com/projectdiscovery/nuclei
            sudo cp "${HOME}/nuclei" /usr/bin
        fi
    else
        echo "semua tools telah terinstall melanjutkan...."
        ./simpleautopentest.sh
    fi
done
